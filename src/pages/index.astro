---
import Layout from '../layouts/Layout.astro';
import { getCollection } from 'astro:content';

import '../styles/global.css';

const projects = await getCollection('projects');
console.log(projects);

const sortedProjects = projects.sort((a, b) => {
  // Primero los destacados
  if (a.data.featured && !b.data.featured) return -1;
  if (!a.data.featured && b.data.featured) return 1;
  return 0;
});
---

<Layout 
	title="Cristian Cantero L칩pez | Desarrollador Web Full Stack en JavaScript, React y Node.js" description="Desarrollador web Full Stack especializado en JavaScript, React, Node.js y tecnolog칤as modernas como Astro y Tailwind CSS. Ayudo a crear sitios web r치pidos, escalables y con un dise침o atractivo."
>
	<div class="text-center text-2xl font-bold mt-10 mb-10">Cristian Dev 游눹</div>
	<section aria-label="Proyectos destacados de Cristian Cantero L칩pez" class="p-4 my-10 mx-auto max-w-5xl">
		<div class="flex items-center justify-center mb-6 gap-2 text-amber-300">
			<svg xmlns="http://www.w3.org/2000/svg" class="w-8 h-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
				<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
					d="M3 7a2 2 0 012-2h5l2 2h7a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2V7z" />
			</svg>
			<h1 class="text-3xl font-bold">Proyectos</h1>
		</div>
		<div class="grid grid-cols-1 gap-6">
			{
				sortedProjects.map(project => {
					const { title, description, image, date, status, technologies, url } = project.data;
					return (
						<div class="p-4 rounded-lg shadow-md flex flex-col h-full">
							<div class="flex items-center justify-between mb-2">
								<h2 class="text-2xl font-bold">{title}</h2>
								<p class={`text-gray-500 text-xs font-bold border border-gray-600 rounded-full px-2 py-0.5 ${status === 'Terminado' ? 'bg-[#7bd47b]' : 'bg-[#ecd36d]'}`}>{status}</p>
							</div>
							<div class="my-4 flex items-center mb-2">
								{technologies.map(tech => (
									<span 
										class="flex items-center justify-center text-gray-600 text-xs px-2 py-1 border border-gray-600 rounded-full mr-2 mb-2"
										style={`background-color: ${tech.color || '#1F2937'};`}
									>
										<img src={tech.icon} alt={tech.name} class="inline-block w-4 h-4 mr-1" />
										<span class="hidden sm:inline-block"><strong>{tech.name}</strong></span>
									</span>
								))}
							</div>
							<div class="overflow-hidden rounded-md">
								<img src={image} alt={title} class="w-full h-auto rounded-md hover:scale-105 transition-transform duration-300" />
							</div>
							<p class="mt-2 text-white text-sm font-bold">{date}</p>
							<p class="my-4 text-gray-400 font-semibold">{description}</p>
							<div class="mt-auto">
								<a href={url.github} class="text-white text-xs  font-bold border border-gray-400 rounded-lg px-2 py-1 bg-gray-800 hover:bg-gray-900" target="_blank">C칩digo</a>
								{url.demo && (
									<a href={url.demo} class="text-white text-xs font-bold border border-gray-400 rounded-lg px-2 py-1 bg-gray-800 hover:bg-gray-900 ml-1" target="_blank">Demo</a>
								)}
							</div>
						</div>
					);
				})
			}
		</div>
	</section>
</Layout>
